<?php eval(base64_decode("LyoqICogR29NYWdlIFNsaWRlciBFeHRlbnNpb24gKiAqIEBjYXRlZ29yeSBFeHRlbnNpb24gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxMC0yMDE0IEdvTWFnZSAoaHR0cDovL3d3dy5nb21hZ2UuY29tKSAqIEBhdXRob3IgR29NYWdlICogQGxpY2Vuc2UgaHR0cDovL3d3dy5nb21hZ2UuY29tL2xpY2Vuc2UtYWdyZWVtZW50LyBTaW5nbGUgZG9tYWluIGxpY2Vuc2UgKiBAdGVybXMgb2YgdXNlIGh0dHA6Ly93d3cuZ29tYWdlLmNvbS90ZXJtcy1vZi11c2UgKiBAdmVyc2lvbiBSZWxlYXNlOiAxLjEgKi8gY2xhc3MgR29NYWdlX1NsaWRlcl9IZWxwZXJfRGF0YSBleHRlbmRzIE1hZ2VfQ29yZV9IZWxwZXJfQWJzdHJhY3QgeyBwdWJsaWMgZnVuY3Rpb24gZ2V0Q29uZmlnRGF0YSgkbm9kZSkgeyByZXR1cm4gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9zbGlkZXIvJyAuICRub2RlKTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0QWxsU3RvcmVEb21haW5zKCkgeyAkZG9tYWlucyA9IGFycmF5KCk7IGZvcmVhY2ggKE1hZ2U6OmFwcCgpLT5nZXRXZWJzaXRlcygpIGFzICR3ZWJzaXRlKSB7ICR1cmwgPSAkd2Vic2l0ZS0+Z2V0Q29uZmlnKCd3ZWIvdW5zZWN1cmUvYmFzZV91cmwnKTsgaWYgKCRkb21haW4gPSB0cmltKHByZWdfcmVwbGFjZSgnL14uKj9cXC9cXC8oLiopP1xcLy8nLCAnJDEnLCAkdXJsKSkpIHsgJGRvbWFpbnNbXSA9ICRkb21haW47IH0gJHVybCA9ICR3ZWJzaXRlLT5nZXRDb25maWcoJ3dlYi9zZWN1cmUvYmFzZV91cmwnKTsgaWYgKCRkb21haW4gPSB0cmltKHByZWdfcmVwbGFjZSgnL14uKj9cXC9cXC8oLiopP1xcLy8nLCAnJDEnLCAkdXJsKSkpIHsgJGRvbWFpbnNbXSA9ICRkb21haW47IH0gfSByZXR1cm4gYXJyYXlfdW5pcXVlKCRkb21haW5zKTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0QXZhaWxhYmVsV2Vic2l0ZXMoKSB7IHJldHVybiAkdGhpcy0+X3coKTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0QXZhaWxhdmVsV2Vic2l0ZXMoKSB7IHJldHVybiAkdGhpcy0+X3coKTsgfSBwcm90ZWN0ZWQgZnVuY3Rpb24gX3coKSB7IGlmICghTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL3NsaWRlci9pbnN0YWxsZWQnKSB8fCAoaW50dmFsKE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9zbGlkZXIvY291bnQnKSkgPiAxMCkgKSB7IHJldHVybiBhcnJheSgpOyB9ICR0aW1lX3RvX3VwZGF0ZSA9IDYwICogNjAgKiAyNCAqIDE1OyAkciA9IE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9zbGlkZXIvYXInKTsgJHQgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vc2xpZGVyL3RpbWUnKTsgJHMgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vc2xpZGVyL3dlYnNpdGVzJyk7ICRsYXN0X2NoZWNrID0gc3RyX3JlcGxhY2UoJHIsICcnLCBNYWdlOjpoZWxwZXIoJ2NvcmUnKS0+ZGVjcnlwdCgkdCkpOyAkYWxsc2l0ZXMgPSBleHBsb2RlKCcsJywgc3RyX3JlcGxhY2UoJHIsICcnLCBNYWdlOjpoZWxwZXIoJ2NvcmUnKS0+ZGVjcnlwdCgkcykpKTsgJGFsbHNpdGVzID0gYXJyYXlfZGlmZigkYWxsc2l0ZXMsIGFycmF5KCIiKSk7IGlmICgoJGxhc3RfY2hlY2sgKyAkdGltZV90b191cGRhdGUpIDwgdGltZSgpKSB7ICR0aGlzLT5hKE1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9zbGlkZXIva2V5JyksIGludHZhbChNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vc2xpZGVyL2NvdW50JykpLCBpbXBsb2RlKCcsJywgJGFsbHNpdGVzKSApOyB9IHJldHVybiAkYWxsc2l0ZXM7IH0gcHVibGljIGZ1bmN0aW9uIGEoJGssICRjID0gMCwgJHMgPSAnJykgeyAkY2ggPSBjdXJsX2luaXQoKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwgc3ByaW50ZignaHR0cHM6Ly93d3cuZ29tYWdlLmNvbS9pbmRleC5waHAvZ29tYWdlX2Rvd25sb2FkYWJsZS9rZXkvY2hlY2snKSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NULCB0cnVlKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1RGSUVMRFMsICdrZXk9JyAuIHVybGVuY29kZSgkaykgLiAnJnNrdT1zbGlkZXJfcHJvJmRvbWFpbnM9JyAuIHVybGVuY29kZShpbXBsb2RlKCcsJywgJHRoaXMtPmdldEFsbFN0b3JlRG9tYWlucygpKSkgLiAnJnZlcj0nIC4gdXJsZW5jb2RlKCcxLjEnKSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9USU1FT1VULCAzMCk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9SRVRVUk5UUkFOU0ZFUiwgdHJ1ZSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9TU0xfVkVSSUZZUEVFUiwgMCk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9TU0xfVkVSSUZZSE9TVCwgMCk7ICRjb250ZW50ID0gY3VybF9leGVjKCRjaCk7ICRyID0gWmVuZF9Kc29uOjpkZWNvZGUoJGNvbnRlbnQpOyAkZSA9IE1hZ2U6OmhlbHBlcignY29yZScpOyBpZiAoZW1wdHkoJHIpKSB7ICR2YWx1ZTEgPSBNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vc2xpZGVyL2FyJyk7ICRncm91cHMgPSBhcnJheSggJ3NsaWRlcicgPT4gYXJyYXkoICdmaWVsZHMnID0+IGFycmF5KCAnYXInID0+IGFycmF5KCAndmFsdWUnID0+ICR2YWx1ZTEgKSwgJ3dlYnNpdGVzJyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAoc3RyaW5nKU1hZ2U6OmdldFN0b3JlQ29uZmlnKCdnb21hZ2VfYWN0aXZhdGlvbi9zbGlkZXIvd2Vic2l0ZXMnKSApLCAndGltZScgPT4gYXJyYXkoICd2YWx1ZScgPT4gKHN0cmluZykkZS0+ZW5jcnlwdCgkdmFsdWUxIC4gKHRpbWUoKSAtICg2MCAqIDYwICogMjQgKiAxNSAtIDE4MDApKSAuICR2YWx1ZTEpICksICdjb3VudCcgPT4gYXJyYXkoICd2YWx1ZScgPT4gJGMgKyAxKSApICkgKTsgTWFnZTo6Z2V0TW9kZWwoJ2FkbWluaHRtbC9jb25maWdfZGF0YScpIC0+c2V0U2VjdGlvbignZ29tYWdlX2FjdGl2YXRpb24nKSAtPnNldEdyb3VwcygkZ3JvdXBzKSAtPnNhdmUoKTsgTWFnZTo6Z2V0Q29uZmlnKCktPnJlaW5pdCgpOyBNYWdlOjphcHAoKS0+cmVpbml0U3RvcmVzKCk7IHJldHVybjsgfSAkdmFsdWUxID0gJyc7ICR2YWx1ZTIgPSAnJzsgaWYgKGlzc2V0KCRyWydkJ10pICYmIGlzc2V0KCRyWydjJ10pKSB7ICR2YWx1ZTEgPSAkZS0+ZW5jcnlwdChiYXNlNjRfZW5jb2RlKFplbmRfSnNvbjo6ZW5jb2RlKCRyKSkpOyBpZiAoISRzKSB7ICRzID0gTWFnZTo6Z2V0U3RvcmVDb25maWcoJ2dvbWFnZV9hY3RpdmF0aW9uL3NsaWRlci93ZWJzaXRlcycpOyB9ICRzID0gYXJyYXlfc2xpY2UoZXhwbG9kZSgnLCcsICRzKSwgMCwgJHJbJ2MnXSk7ICR2YWx1ZTIgPSAkZS0+ZW5jcnlwdCgkdmFsdWUxIC4gaW1wbG9kZSgnLCcsICRzKSAuICR2YWx1ZTEpOyB9ICRncm91cHMgPSBhcnJheSggJ3NsaWRlcicgPT4gYXJyYXkoICdmaWVsZHMnID0+IGFycmF5KCAnYXInID0+IGFycmF5KCAndmFsdWUnID0+ICR2YWx1ZTEgKSwgJ3dlYnNpdGVzJyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAoc3RyaW5nKSR2YWx1ZTIgKSwgJ3RpbWUnID0+IGFycmF5KCAndmFsdWUnID0+IChzdHJpbmcpJGUtPmVuY3J5cHQoJHZhbHVlMSAuIHRpbWUoKSAuICR2YWx1ZTEpICksICdpbnN0YWxsZWQnID0+IGFycmF5KCAndmFsdWUnID0+IDEgKSwgJ2NvdW50JyA9PiBhcnJheSggJ3ZhbHVlJyA9PiAwKSApICkgKTsgTWFnZTo6Z2V0TW9kZWwoJ2FkbWluaHRtbC9jb25maWdfZGF0YScpIC0+c2V0U2VjdGlvbignZ29tYWdlX2FjdGl2YXRpb24nKSAtPnNldEdyb3VwcygkZ3JvdXBzKSAtPnNhdmUoKTsgTWFnZTo6Z2V0Q29uZmlnKCktPnJlaW5pdCgpOyBNYWdlOjphcHAoKS0+cmVpbml0U3RvcmVzKCk7IH0gcHVibGljIGZ1bmN0aW9uIGdhKCkgeyByZXR1cm4gWmVuZF9Kc29uOjpkZWNvZGUoYmFzZTY0X2RlY29kZShNYWdlOjpoZWxwZXIoJ2NvcmUnKS0+ZGVjcnlwdChNYWdlOjpnZXRTdG9yZUNvbmZpZygnZ29tYWdlX2FjdGl2YXRpb24vc2xpZGVyL2FyJykpKSk7IH0gcHVibGljIGZ1bmN0aW9uIGZvcm1hdENvbG9yKCR2YWx1ZSkgeyBpZiAoJHZhbHVlID0gcHJlZ19yZXBsYWNlKCcvW15hLXpBLVowLTlcc10vJywgJycsICR2YWx1ZSkpIHsgJHZhbHVlID0gJyMnIC4gJHZhbHVlOyB9IHJldHVybiAkdmFsdWU7IH0gLyoqICogT3B0aW9ucyBnZXR0ZXIgKiAqIEByZXR1cm4gYXJyYXkgKi8gcHVibGljIHN0YXRpYyBmdW5jdGlvbiBlZmZlY3RUb09wdGlvbkhhc2goKSB7ICRoZWxwZXIgPSBNYWdlOjpoZWxwZXIoJ2dvbWFnZV9zbGlkZXInKTsgcmV0dXJuIGFycmF5KCBHb01hZ2VfU2xpZGVyX01vZGVsX0Jsb2NrOjpFRkZFQ1RfU0lNUExFID0+ICRoZWxwZXItPl9fKCdTaW1wbGUnKSwgR29NYWdlX1NsaWRlcl9Nb2RlbF9CbG9jazo6RUZGRUNUX1ZFUlRJQ0FMX1NQTElUID0+ICRoZWxwZXItPl9fKCdWZXJ0aWNhbCBzcGxpdCcpLCBHb01hZ2VfU2xpZGVyX01vZGVsX0Jsb2NrOjpFRkZFQ1RfSE9SSVpPTlRBTF9TUExJVCA9PiAkaGVscGVyLT5fXygnSG9yaXpvbnRhbCBzcGxpdCcpLCBHb01hZ2VfU2xpZGVyX01vZGVsX0Jsb2NrOjpFRkZFQ1RfV0lQRV9SSUdIVCA9PiAkaGVscGVyLT5fXygnV2lwZSByaWdodCcpLCBHb01hZ2VfU2xpZGVyX01vZGVsX0Jsb2NrOjpFRkZFQ1RfV0lQRV9MRUZUID0+ICRoZWxwZXItPl9fKCdXaXBlIGxlZnQnKSwgR29NYWdlX1NsaWRlcl9Nb2RlbF9CbG9jazo6RUZGRUNUX1dJUEVfVVAgPT4gJGhlbHBlci0+X18oJ1dpcGUgdXAnKSwgR29NYWdlX1NsaWRlcl9Nb2RlbF9CbG9jazo6RUZGRUNUX1dJUEVfRE9XTiA9PiAkaGVscGVyLT5fXygnV2lwZSBkb3duJyksIEdvTWFnZV9TbGlkZXJfTW9kZWxfQmxvY2s6OkVGRkVDVF9QQUdFX0ZMSVAgPT4gJGhlbHBlci0+X18oJ1BhZ2UgRmxpcCcpLCBHb01hZ2VfU2xpZGVyX01vZGVsX0Jsb2NrOjpFRkZFQ1RfSE9SSVpPTlRBTF9QQU5FTFMgPT4gJGhlbHBlci0+X18oJ0hvcml6b250YWwgcGFuZWxzJyksIEdvTWFnZV9TbGlkZXJfTW9kZWxfQmxvY2s6OkVGRkVDVF9WRVJUSUNBTF9QQU5FTFMgPT4gJGhlbHBlci0+X18oJ1ZlcnRpY2FsIHBhbmVscycpICk7IH0gcHVibGljIGZ1bmN0aW9uIGdldFNsaWRlVGV4dFN0eWxlKCRzbGlkZSwgJGJsb2NrKSB7ICRzdHlsZSA9ICcnOyBpZiAoJHNsaWRlLT5nZXRUZXh0V2luZG93TGVmdEluZGVudCgpICE9ICcnKSB7ICRzdHlsZSAuPSAnbWFyZ2luLWxlZnQ6ICcgLiAoaW50KSRzbGlkZS0+Z2V0VGV4dFdpbmRvd0xlZnRJbmRlbnQoKSAuICdweDsnOyAkbGVmdEluZGVudCA9IChpbnQpJHNsaWRlLT5nZXRUZXh0V2luZG93TGVmdEluZGVudCgpOyB9IGlmICgkc2xpZGUtPmdldFRleHRXaW5kb3dUb3BJbmRlbnQoKSAhPSAnJykgeyAkc3R5bGUgLj0gJ21hcmdpbi10b3A6ICcgLiAoaW50KSRzbGlkZS0+Z2V0VGV4dFdpbmRvd1RvcEluZGVudCgpIC4gJ3B4Oyc7ICR0b3BJbmRlbnQgPSAoaW50KSRzbGlkZS0+Z2V0VGV4dFdpbmRvd1RvcEluZGVudCgpOyB9IGlmICgkc2xpZGUtPmdldFRleHRXaW5kb3dXaWR0aCgpICE9ICcnICYmIChpbnQpJHNsaWRlLT5nZXRUZXh0V2luZG93V2lkdGgoKSA+IDApIHsgJHN0eWxlIC49ICd3aWR0aDogJyAuIChpbnQpJHNsaWRlLT5nZXRUZXh0V2luZG93V2lkdGgoKSAuICdweDsnOyB9IGVsc2UgeyBpZiAoJGJsb2NrLT5nZXRTaG93TmF2aWdhdGlvbkJhcigpID09IEdvTWFnZV9TbGlkZXJfTW9kZWxfQWRtaW5odG1sX1N5c3RlbV9Db25maWdfU291cmNlX05hdmlnYXRpb25fU2hvdzo6U0lERUJBUikgeyBpZiAoJGJsb2NrLT5nZXROYXZpZ2F0aW9uQmFyQWxpZ25tZW50KCkgIT0gR29NYWdlX1NsaWRlcl9Nb2RlbF9BZG1pbmh0bWxfU3lzdGVtX0NvbmZpZ19Tb3VyY2VfTmF2aWdhdGlvbl9BbGlnbm1lbnQ6OlRPUCAmJiAkYmxvY2stPmdldE5hdmlnYXRpb25CYXJBbGlnbm1lbnQoKSAhPSBHb01hZ2VfU2xpZGVyX01vZGVsX0FkbWluaHRtbF9TeXN0ZW1fQ29uZmlnX1NvdXJjZV9OYXZpZ2F0aW9uX0FsaWdubWVudDo6Qk9UVE9NICkgeyAkd2lkdGggPSBpbnR2YWwoJGJsb2NrLT5nZXRCbG9ja1dpZHRoKCkpIC0gaW50dmFsKCRibG9jay0+Z2V0U2lkZWJhcldpZHRoKCkpOyB9IGVsc2UgeyAkd2lkdGggPSBpbnR2YWwoJGJsb2NrLT5nZXRCbG9ja1dpZHRoKCkpOyB9IH0gZWxzZSB7ICR3aWR0aCA9IGludHZhbCgkYmxvY2stPmdldEJsb2NrV2lkdGgoKSk7IH0gJHdpZHRoID0gJHdpZHRoIC0gJGxlZnRJbmRlbnQ7ICRzdHlsZSAuPSAnd2lkdGg6ICcgLiAkd2lkdGggLiAncHg7JzsgfSBpZiAoJHNsaWRlLT5nZXRUZXh0V2luZG93SGVpZ2h0KCkgIT0gJycgJiYgKGludCkkc2xpZGUtPmdldFRleHRXaW5kb3dIZWlnaHQoKSA+IDApIHsgJHN0eWxlIC49ICdoZWlnaHQ6ICcgLiAoaW50KSRzbGlkZS0+Z2V0VGV4dFdpbmRvd0hlaWdodCgpIC4gJ3B4Oyc7IH0gZWxzZSB7IGlmICgkYmxvY2stPmdldFNob3dOYXZpZ2F0aW9uQmFyKCkgPT0gR29NYWdlX1NsaWRlcl9Nb2RlbF9BZG1pbmh0bWxfU3lzdGVtX0NvbmZpZ19Tb3VyY2VfTmF2aWdhdGlvbl9TaG93OjpTSURFQkFSKSB7IGlmICgkYmxvY2stPmdldE5hdmlnYXRpb25CYXJBbGlnbm1lbnQoKSAhPSBHb01hZ2VfU2xpZGVyX01vZGVsX0FkbWluaHRtbF9TeXN0ZW1fQ29uZmlnX1NvdXJjZV9OYXZpZ2F0aW9uX0FsaWdubWVudDo6VE9QICYmICRibG9jay0+Z2V0TmF2aWdhdGlvbkJhckFsaWdubWVudCgpICE9IEdvTWFnZV9TbGlkZXJfTW9kZWxfQWRtaW5odG1sX1N5c3RlbV9Db25maWdfU291cmNlX05hdmlnYXRpb25fQWxpZ25tZW50OjpCT1RUT00gKSB7ICRoZWlnaHQgPSBpbnR2YWwoJGJsb2NrLT5nZXRCbG9ja0hlaWdodCgpKTsgfSBlbHNlIHsgJGhlaWdodCA9IGludHZhbCgkYmxvY2stPmdldEJsb2NrSGVpZ2h0KCkpIC0gaW50dmFsKCRibG9jay0+Z2V0U2lkZWJhckhlaWdodCgpKTsgfSB9IGVsc2UgeyAkaGVpZ2h0ID0gaW50dmFsKCRibG9jay0+Z2V0QmxvY2tIZWlnaHQoKSk7IH0gJGhlaWdodCA9ICRoZWlnaHQgLSAkdG9wSW5kZW50OyAkc3R5bGUgLj0gJ2hlaWdodDogJyAuICRoZWlnaHQgLiAncHg7JzsgfSBpZiAoJHNsaWRlLT5nZXRUZXh0V2luZG93QWxpZ25tZW50KCkgPT0gR29NYWdlX1NsaWRlcl9Nb2RlbF9BZG1pbmh0bWxfU3lzdGVtX0NvbmZpZ19Tb3VyY2VfU2xpZGVfV2luZG93YWxpZ25tZW50OjpSSUdIVCkgeyAkc3R5bGUgLj0gJ3RleHQtYWxpZ246IHJpZ2h0Oyc7IH0gcmV0dXJuICRzdHlsZTsgfSBwdWJsaWMgZnVuY3Rpb24gZ2V0U2xpZGVUZXh0QmdTdHlsZSgkc2xpZGUsICRibG9jaykgeyAkc3R5bGUgPSAnJzsgaWYgKCRzbGlkZS0+Z2V0VGV4dFdpbmRvd0xlZnRJbmRlbnQoKSAhPSAnJykgeyAkc3R5bGUgLj0gJ21hcmdpbi1sZWZ0OiAnIC4gKGludCkkc2xpZGUtPmdldFRleHRXaW5kb3dMZWZ0SW5kZW50KCkgLiAncHg7JzsgJGxlZnRJbmRlbnQgPSAoaW50KSRzbGlkZS0+Z2V0VGV4dFdpbmRvd0xlZnRJbmRlbnQoKTsgfSBpZiAoJHNsaWRlLT5nZXRUZXh0V2luZG93VG9wSW5kZW50KCkgIT0gJycpIHsgJHN0eWxlIC49ICdtYXJnaW4tdG9wOiAnIC4gKGludCkkc2xpZGUtPmdldFRleHRXaW5kb3dUb3BJbmRlbnQoKSAuICdweDsnOyAkdG9wSW5kZW50ID0gKGludCkkc2xpZGUtPmdldFRleHRXaW5kb3dUb3BJbmRlbnQoKTsgfSBpZiAoJHNsaWRlLT5nZXRUZXh0V2luZG93V2lkdGgoKSAhPSAnJyAmJiAoaW50KSRzbGlkZS0+Z2V0VGV4dFdpbmRvd1dpZHRoKCkgPiAwKSB7ICRzdHlsZSAuPSAnd2lkdGg6ICcgLiAoaW50KSRzbGlkZS0+Z2V0VGV4dFdpbmRvd1dpZHRoKCkgLiAncHg7JzsgfSBlbHNlIHsgaWYgKCRibG9jay0+Z2V0U2hvd05hdmlnYXRpb25CYXIoKSA9PSBHb01hZ2VfU2xpZGVyX01vZGVsX0FkbWluaHRtbF9TeXN0ZW1fQ29uZmlnX1NvdXJjZV9OYXZpZ2F0aW9uX1Nob3c6OlNJREVCQVIpIHsgaWYgKCRibG9jay0+Z2V0TmF2aWdhdGlvbkJhckFsaWdubWVudCgpICE9IEdvTWFnZV9TbGlkZXJfTW9kZWxfQWRtaW5odG1sX1N5c3RlbV9Db25maWdfU291cmNlX05hdmlnYXRpb25fQWxpZ25tZW50OjpUT1AgJiYgJGJsb2NrLT5nZXROYXZpZ2F0aW9uQmFyQWxpZ25tZW50KCkgIT0gR29NYWdlX1NsaWRlcl9Nb2RlbF9BZG1pbmh0bWxfU3lzdGVtX0NvbmZpZ19Tb3VyY2VfTmF2aWdhdGlvbl9BbGlnbm1lbnQ6OkJPVFRPTSApIHsgJHdpZHRoID0gaW50dmFsKCRibG9jay0+Z2V0QmxvY2tXaWR0aCgpKSAtIGludHZhbCgkYmxvY2stPmdldFNpZGViYXJXaWR0aCgpKTsgfSBlbHNlIHsgJHdpZHRoID0gaW50dmFsKCRibG9jay0+Z2V0QmxvY2tXaWR0aCgpKTsgfSB9IGVsc2UgeyAkd2lkdGggPSBpbnR2YWwoJGJsb2NrLT5nZXRCbG9ja1dpZHRoKCkpOyB9ICR3aWR0aCA9ICR3aWR0aCAtICRsZWZ0SW5kZW50OyAkc3R5bGUgLj0gJ3dpZHRoOiAnIC4gJHdpZHRoIC4gJ3B4Oyc7IH0gaWYgKCRzbGlkZS0+Z2V0VGV4dFdpbmRvd0hlaWdodCgpICE9ICcnICYmIChpbnQpJHNsaWRlLT5nZXRUZXh0V2luZG93SGVpZ2h0KCkgPiAwKSB7ICRzdHlsZSAuPSAnaGVpZ2h0OiAnIC4gKGludCkkc2xpZGUtPmdldFRleHRXaW5kb3dIZWlnaHQoKSAuICdweDsnOyB9IGVsc2UgeyBpZiAoJGJsb2NrLT5nZXRTaG93TmF2aWdhdGlvbkJhcigpID09IEdvTWFnZV9TbGlkZXJfTW9kZWxfQWRtaW5odG1sX1N5c3RlbV9Db25maWdfU291cmNlX05hdmlnYXRpb25fU2hvdzo6U0lERUJBUikgeyBpZiAoJGJsb2NrLT5nZXROYXZpZ2F0aW9uQmFyQWxpZ25tZW50KCkgIT0gR29NYWdlX1NsaWRlcl9Nb2RlbF9BZG1pbmh0bWxfU3lzdGVtX0NvbmZpZ19Tb3VyY2VfTmF2aWdhdGlvbl9BbGlnbm1lbnQ6OlRPUCAmJiAkYmxvY2stPmdldE5hdmlnYXRpb25CYXJBbGlnbm1lbnQoKSAhPSBHb01hZ2VfU2xpZGVyX01vZGVsX0FkbWluaHRtbF9TeXN0ZW1fQ29uZmlnX1NvdXJjZV9OYXZpZ2F0aW9uX0FsaWdubWVudDo6Qk9UVE9NICkgeyAkaGVpZ2h0ID0gaW50dmFsKCRibG9jay0+Z2V0QmxvY2tIZWlnaHQoKSk7IH0gZWxzZSB7ICRoZWlnaHQgPSBpbnR2YWwoJGJsb2NrLT5nZXRCbG9ja0hlaWdodCgpKSAtIGludHZhbCgkYmxvY2stPmdldFNpZGViYXJIZWlnaHQoKSk7IH0gfSBlbHNlIHsgJGhlaWdodCA9IGludHZhbCgkYmxvY2stPmdldEJsb2NrSGVpZ2h0KCkpOyB9ICRoZWlnaHQgPSAkaGVpZ2h0IC0gJHRvcEluZGVudDsgJHN0eWxlIC49ICdoZWlnaHQ6ICcgLiAkaGVpZ2h0IC4gJ3B4Oyc7IH0gaWYgKCRzbGlkZS0+Z2V0VGV4dFdpbmRvd0JhY2tncm91bmQoKSAhPSAnJykgeyAkc3R5bGUgLj0gJ2JhY2tncm91bmQtY29sb3I6ICcgLiAkc2xpZGUtPmdldFRleHRXaW5kb3dCYWNrZ3JvdW5kKCkgLiAnOyc7IGlmICgkc2xpZGUtPmdldEJhY2tncm91bmRPcGFjaXR5KCkgIT0gJycpIHsgaWYgKCR0aGlzLT5fZGV0ZWN0X2llKCkpIHsgJG9wYWNpdHkgPSAkc2xpZGUtPmdldEJhY2tncm91bmRPcGFjaXR5KCk7IGlmICgkc2xpZGUtPmdldEJhY2tncm91bmRPcGFjaXR5KCkgPiAwICYmICRzbGlkZS0+Z2V0QmFja2dyb3VuZE9wYWNpdHkoKSA8IDEpIHsgJG9wYWNpdHkgPSAkc2xpZGUtPmdldEJhY2tncm91bmRPcGFjaXR5KCkgKiAxMDA7IH0gJHN0eWxlIC49ICdmaWx0ZXI6YWxwaGEob3BhY2l0eT0nIC4gJG9wYWNpdHkgLiAnKTsnOyB9IGVsc2UgeyAkc3R5bGUgLj0gJ29wYWNpdHk6ICcgLiAkc2xpZGUtPmdldEJhY2tncm91bmRPcGFjaXR5KCkgLiAnOyc7IH0gfSB9IHJldHVybiAkc3R5bGU7IH0gcHJpdmF0ZSBmdW5jdGlvbiBfZGV0ZWN0X2llKCkgeyAkdXNlcl9hZ2VudCA9ICRfU0VSVkVSWydIVFRQX1VTRVJfQUdFTlQnXTsgaWYgKHN0cmlzdHIoJHVzZXJfYWdlbnQsICJtc2llIDciKSkgeyByZXR1cm4gdHJ1ZTsgfSBpZiAoc3RyaXN0cigkdXNlcl9hZ2VudCwgIm1zaWUgOCIpKSB7IHJldHVybiB0cnVlOyB9IHJldHVybiBmYWxzZTsgfSBwdWJsaWMgZnVuY3Rpb24gbm90aWZ5KCkgeyAkZnJlcXVlbmN5ID0gaW50dmFsKE1hZ2U6OmFwcCgpLT5sb2FkQ2FjaGUoJ2dvbWFnZV9ub3RpZmljYXRpb25zX2ZyZXF1ZW5jeScpKTsgaWYgKCEkZnJlcXVlbmN5KSB7ICRmcmVxdWVuY3kgPSAyNDsgfSAkbGFzdF91cGRhdGUgPSBpbnR2YWwoTWFnZTo6YXBwKCktPmxvYWRDYWNoZSgnZ29tYWdlX25vdGlmaWNhdGlvbnNfbGFzdF91cGRhdGUnKSk7IGlmICgoJGZyZXF1ZW5jeSAqIDYwICogNjAgKyAkbGFzdF91cGRhdGUpID4gdGltZSgpKSB7IHJldHVybiBmYWxzZTsgfSAkdGltZXN0YW1wID0gJGxhc3RfdXBkYXRlOyBpZiAoISR0aW1lc3RhbXApIHsgJHRpbWVzdGFtcCA9IHRpbWUoKTsgfSB0cnkgeyAkY2ggPSBjdXJsX2luaXQoKTsgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1VSTCwgc3ByaW50ZignaHR0cHM6Ly93d3cuZ29tYWdlLmNvbS9pbmRleC5waHAvZ29tYWdlX25vdGlmaWNhdGlvbi9pbmRleC9kYXRhJykpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVCwgdHJ1ZSk7IGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NURklFTERTLCAnc2t1PXNsaWRlcl9wcm8mdGltZXN0YW1wPScgLiAkdGltZXN0YW1wIC4gJyZ2ZXI9JyAuIHVybGVuY29kZSgnMS4xJykpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVElNRU9VVCwgMzApOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIHRydWUpOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWVBFRVIsIDApOyBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWUhPU1QsIDApOyAkY29udGVudCA9IGN1cmxfZXhlYygkY2gpOyAkcmVzdWx0ID0gWmVuZF9Kc29uOjpkZWNvZGUoJGNvbnRlbnQpOyBpZiAoJHJlc3VsdCAmJiBpc3NldCgkcmVzdWx0WydmcmVxdWVuY3knXSkgJiYgKCRyZXN1bHRbJ2ZyZXF1ZW5jeSddICE9ICRmcmVxdWVuY3kpKSB7IE1hZ2U6OmFwcCgpLT5zYXZlQ2FjaGUoJHJlc3VsdFsnZnJlcXVlbmN5J10sICdnb21hZ2Vfbm90aWZpY2F0aW9uc19mcmVxdWVuY3knKTsgfSBpZiAoJHJlc3VsdCAmJiBpc3NldCgkcmVzdWx0WydkYXRhJ10pKSB7IGlmICghZW1wdHkoJHJlc3VsdFsnZGF0YSddKSkgeyBNYWdlOjpnZXRNb2RlbCgnYWRtaW5ub3RpZmljYXRpb24vaW5ib3gnKS0+cGFyc2UoJHJlc3VsdFsnZGF0YSddKTsgfSB9IH0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgeyB9IE1hZ2U6OmFwcCgpLT5zYXZlQ2FjaGUodGltZSgpLCAnZ29tYWdlX25vdGlmaWNhdGlvbnNfbGFzdF91cGRhdGUnKTsgfSAvKiogKiBAcGFyYW0gaW50ICRsZW5ndGggKiBAcmV0dXJuIHN0cmluZyAqLyBwdWJsaWMgZnVuY3Rpb24gZ2VuZXJhdGVDb2RlKCRsZW5ndGggPSAxMikgeyAkcG9zc2libGUgPSAiMDEyMzQ1Njc4OWFiY2RmZ2hqa21ucHFyc3R2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUkVTVFVWV1hZWl8iOyByZXR1cm4gc3Vic3RyKHN0cl9zaHVmZmxlKCRwb3NzaWJsZSksIDAsICRsZW5ndGgpOyB9IH0="));